{% extends "GitonomyFrontendBundle::layout.html.twig" %}

{% block title project.name %}

{% block content %}
    <div class="page-header">
        <h1>{{ project.name }}</h1>
    </div>
    {% include "GitonomyFrontendBundle:Project:_navigation.html.twig" with {active: 'project'} %}
    <div class="row">
        <div class="span6">
            <section>
                <h2>Branches</h2>
            <ul class="branch-list">
                <li class="active">
                    {% set active = repository.references.getBranch(reference) %}
                    <p>
                        <span class="name">{{ active.name }}</span>
                        <span class="last-modification">{{ active.lastModification | date_long }}</span>
                </li>
                {% for row in branches_activity %}
                    <li>
                        <p>
                            <span class="name">{{ row.branch.name }}</span>
                            <span class="behind">-{{ row.behind }}</span>
                            <span class="above">+{{row.above}}</span>
                            <span class="last-modification">{{ row.branch.lastModification | date_long }}</span>
                        </p>
                    </li>
                {% endfor %}
            </ul>
        </div>
        <div class="span6">
            <div class="page-header">
                <h2>SSH Access</h2>
                <pre>{{ project_ssh(project) }}</pre>
            </div>
            <section>
                <div class="page-header">
                    <h2>Users on the project</h2>
                </div>
                {% for userRole in project.userRoles %}
                    <h3><a href="#">{{ userRole.user.fullname }}</a> <small>{{ userRole.role.name }}</small></h3>
                {% else %}
                    <h3><small>No user associated to the project</small></h3>
                {% endfor %}
            </section>
        </div>
{% endblock %}
