{% set projects = project_list() %}
{% set users = user_list() %}

<div class="navbar">
    <div class="navbar-inner">
        <ul class="nav pull-right">
            {% if is_granted('ROLE_USER_LIST') or is_granted('ROLE_PROJECT_LIST') or is_granted('ROLE_ROLE_LIST') %}
                <li class="admin dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        {{ 'menu.administration'|trans({}, 'navigation') }}
                        <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                        {% if is_granted('ROLE_USER_LIST') %}
                            <li><a href="{{ path('gitonomyfrontend_adminuser_list') }}">
                                {{ 'menu.administration.users'|trans({}, 'navigation') }}
                            </a></li>
                        {% endif %}
                        {% if is_granted('ROLE_PROJECT_LIST') %}
                            <li><a href="{{ path('gitonomyfrontend_adminproject_list') }}">
                                {{ 'menu.administration.projects'|trans({}, 'navigation') }}
                            </a></li>
                        {% endif %}
                        {% if is_granted(['ROLE_ROLE_LIST']) %}
                            <li><a href="{{ path('gitonomyfrontend_adminrole_list') }}">
                                {{ 'menu.administration.roles'|trans({}, 'navigation') }}
                            </a></li>
                        {% endif %}
                    </ul>
                </li>
            {% endif %}
            <li class="lang dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                    {{ 'menu.lang'|trans({}, 'navigation') }}
                    <b class="caret"></b>
                </a>
                <ul class="dropdown-menu">
                    {% for locale in gitonomy.locales %}
                        <li><a href="{{ path('gitonomyfrontend_main_setLocale', {'locale': locale}) }}">{{ locale|trans({}, 'locales') }}</a></li>
                    {% endfor %}
                </ul>
            </li>
            {% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}
                <li class="account dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        {{ app.user.username }}
                        <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="{{ path('gitonomyfrontend_profile_index') }}">
                            {{ 'menu.profile.index'|trans({}, 'navigation')}}
                        </a></li>
                        <li class="divider"></li>
                        <li><a href="{{ path('gitonomyfrontend_security_logout') }}">
                            {{ 'menu.profile.logout'|trans({}, 'navigation') }}
                        </a></li>
                    </ul>
                </li>
            {% else %}
                {% if gitonomy.open_registration %}
                    <li><a href="{{ path('gitonomyfrontend_security_register') }}">
                        {{ 'menu.register'|trans({}, 'navigation') }}
                    </a></li>
                {% endif %}
                <li><a href="{{ path('gitonomyfrontend_security_login') }}">
                    {{ 'menu.login'|trans({}, 'navigation') }}
                </a></li>
            {% endif %}
        </ul>

        <a class="brand" href="{{ path('gitonomyfrontend_main_homepage') }}">{{ gitonomy.name }}</a>
        {% if project|default(null) %}
            <a class="brand">&raquo;</a>
            <a class="brand" href="{{ path('gitonomyfrontend_project_show', {slug: project.slug}) }}">
                {{ project.name }}
            </a>
        {% endif %}
        </ul>
    </div>
</div>
